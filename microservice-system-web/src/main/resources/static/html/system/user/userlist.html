<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>用户列表</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../../../plugins/layui-2.1.3/css/layui.css" media="all">
  </head>
  <body>
    <div class="tab-body" style="margin:10px">
      <div class="handle-box">
        <ul>
          <li class="handle-item"><span class="layui-form-label">用户名：</span>
            <div class="layui-input-inline"><input type="text" autocomplete="off" placeholder="请输入搜索条件" class="layui-input"></div>
            <button class="layui-btn mgl-20" id="btn-queryuser">查询</button>
            <span class="fr">
            <a class="layui-btn btn-add btn-default" id="btn-adduser">
            <i class="linyer icon-add"></i>添加</a>
            <a class="layui-btn layui-btn-danger radius btn-delect" id="btn-deleteuser">
            <i class="linyer icon-delete"></i>删除</a>
            <a class="layui-btn btn-add btn-default" id="btn-edituser">
            <i class="linyer icon-edit"></i>编辑</a>
            <a class="layui-btn btn-show btn-default" id="btn-viewuser">
            <i class="linyer icon-show"></i>查看</a>
            </span>
           </li>
        </ul>
      </div>
      <div id="userTable"></div>
    </div>
    
    <script src="../../../plugins/jquery-1.11.0/jquery-1.11.0.min.js"></script>
    <script src="../../../plugins/layui-2.1.3/layui.js"></script>
   <!--  <script src="../../../plugins/jquery-serializejson/jquery.serializejson.js"></script> -->
    <script>
    	layui.use(['layer','form','laydate','table','carousel', 'upload', 'element'], function(){
		  var $ = layui.jquery,
		  	layer = layui.layer,
		  	form = layui.form,
		  	laydate = layui.laydate,
		  	table = layui.table,
		  	carousel = layui.carousel,
		  	upload = layui.upload,
		  	element = layui.element;
		  	table.render({
			    elem: '#userTable',
			   // data:[],
			    height: 472,
			    url: '/system/user/listByPage',
			    request:{
			    		pageName:'curr',
			    		limitName:'nums'
			    },
			    cols: [[ //标题栏
			      {checkbox: true, LAY_CHECKED: false}, //默认全选
			      {field: 'userId', title: 'ID', width: '120', sort: true},
			      {field: 'userName', title: '用户名', width: '120', sort: true},
			      {field: 'nickName', title: '昵称', width: '120', sort: true},
			      {field: 'password', title: '密码', width: '120', sort: true},
			      {field: 'gender', title: '性别', width: '120', sort: true},
			      {field: 'mobileNumber', title: '手机号码', width:'150', sort: true}
			    ]], 
			    skin: 'row', //表格风格
			    even: true,
			    page: true, //是否显示分页
			    limits: [5, 10, 20,40],
			    limit: 10 //每页默认显示的数量
			});
		  	
		  	//查询
		  	$("#btn-queryuser").on('click', function() {
    		    		alert("refresh table");	
    		});
		    //新增
		  	$("#btn-adduser").on('click', function() {
    		    layer.open({
    		    	  type: 2,
    		    	  area: ['700px', '450px'],
    		    	  fixed: false,
    		    	  maxmin: true,
    		    	  content: '/system-web/html/system/user/useradd.html',
    		    	  btn: ['提交', '全部关闭'],
    		    	  btnAlign: 'c',
    		    	  btn1: function(){
    		    		  /* var temp=$('#useradd-form').serialize();  
    		    		  var a = $("#useradd-form");
    		    		  alert(temp);
    		    		  $.ajax({
  			                type: "POST",
  			                dataType: "json",
  			                url: "/system/user/add",
  			                data: $("#useradd-form").serializeJSON(),
  			                success: function (obj) {
  			                	parent.window.location.href="/system-web/html/system/user/userlist.html";
  			                 	var index = parent.layer.getFrameIndex(window.name);
  			                 	parent.layer.close(index);
  			                    // return false;
  			                },
  			                error: function(data) {
  			                	 	layer.msg("网络错误");
  			                }
  			            }); */
  			          $("form").submit(function(e){
  			        	  		alert("Submitted");
  			        	  });
    		    		  
	    	          },
	    	          btn2: function(){
	    	             layer.closeAll();
	    	          },
	    	          zIndex: layer.zIndex, 
	    	          success: function(layero){
	    	          	layer.setTop(layero);//加载完成后置顶
	    	          }
    		    	});
	    	});
		  	
		  	$("#btn-deleteuser").on('click', function() {
    		   
    		  	});
		  	
		  	$("#btn-edituser").on('click', function() {
	    			alert("refresh table");	
	  		});
		  	
		  	$("#btn-viewuser").on('click', function() {
		  		layer.open({
	  		    	  type: 2,
	  		    	  area: ['700px', '450px'],
	  		    	  fixed: false,
	  		    	  maxmin: true,
	  		    	  content: '/system-web/html/system/user/userview.html'
	  		    	});
  			});
			
   	 	});
    	
    	
    	
    		
	</script>
  </body>

</html>